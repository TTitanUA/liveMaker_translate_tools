# LiveMaker Translate Tools
## Описание
Это приложение содержит в себе набор инструментов для перевода игр на движке LiveMaker.
Возможен как полностью автоматический перевод (Azure AI Translator), так и ручной (Tolgee или любой другой сервис который может работать с json файлами локализаций формата i18n).

Построено на основании:
- [pylivemaker](https://github.com/pmrowla/pylivemaker/tree/master)
- [pylivemaker-tools](https://github.com/Stefan311/pylivemaker-tools)

**Авторам РЕСПЕКТ!!!** 

## Использование
Это первая версия приложения, поэтому оно не содержит в себе графического интерфейса.
Для использования необходимо запустить файл `main.py` с помощью Python 3.11+. 
Приложение будет работать в консольном режиме.

### Подготовка проекта
1. Создайте папку `project` в корне приложения.
2. Создайте в ней папку с названием проекта (например `my_project`).
3. В папке проекта создайте папку `game` и поместите в неё файлы игры.
4. В файле `main.py` в переменной `project_name` укажите название вашего проекта.
5. В файле `main.py` в переменной `main_file` укажите название основного файла игры, например `game.exe`.
Это не обязательно будет exe файл, а файл который содержит архив ресурсов. (Тестировал только на exe файле).

### Распаковка ресурсов
1. Открываем файл `main.py` и меняем значение переменной `stage` на `extract`.
2. Запускаем файл `main.py`.
3. Если все прошло успешно, то в папке `project` появится папка `extract` с распакованными ресурсами и папка `translate` с `*.csv` и `origin.json`. 

### Перевод
#### Автоматический перевод (не обязательно)
Для автоматического перевода используется сервис Azure AI Translator.
Сначала надо пойти и зарегистрировать аккаунт на [Azure](https://portal.azure.com/) бесплатно дается 2 000 000 символов в месяц.
После регистрации необходимо создать ресурс для переводчика.
После создания ресурса необходимо получить ключ доступа к нему.
Для этого переходим в настройки ресурса и в разделе "Ключи и конечные точки" копируем значение ключа доступа.
1. Копируем файл `config.example.py` в `config.py` и вставляем в него ключ доступа, конечную точку и регион.
2. Открываем файл `main.py` и меняем значение переменной `stage` на `translate`.
3. Запускаем файл `main.py`. И идем пить чай, кофе или что там любите пить.
4. В папке `translate` появится файл `translate.json` с переведенными строками. Так же в папке `project` появится папка `cache` с кешем переведенных строк (позволяет не гонять лишьний раз АПИ).
5. Если вам не нравится перевод, то вы можете отредактировать файл `translate.json` вручную.

#### Ручной перевод
Для ручного перевода можно использовать любой сервис который может работать с json файлами локализаций формата i18n (обычный словарь).
Оригинальный файл локализации находится в папке `translate` и называется `origin.json`.
Только желательно не скармливать сервису весь файл перевода, выделить из него только уникальные строки. В тех играх которые встречались мне, было довольно много повторов.
Результат перевода сохраняем в файл `translate.json` в папке `translate`.

#### Обновление CSV
1. Открываем файл `main.py` и меняем значение переменной `stage` на `insert`.
2. Запускаем файл `main.py`.
3. В папке `translate` обновятся файлы `*.csv`, в них появится новый столбец с переводом.

### Патчниг
Убедитесь что в папке с проектом нет папки `result`, если она есть, удалите её.
1. Открываем файл `main.py` и меняем значение переменной `stage` на `patch`.
2. Запускаем файл `main.py`.
3. В папке `project` появится папка `result` с пропатченными ресурсами игры.
4. Открываем файл `main.py` и меняем значение переменной `stage` на `none`.
5. Идем в папку `result` и запускаем игру.

## TODO
- [ ] Добавить графический интерфейс
- [ ] Добавить возможность перевода строк меню (сейчас отключено так как ломает игру)
- [ ] Добавить утилиты для помоши в ручном переводе

## Баги и обратная связь
При нахождении багов создавайте [issue](https://github.com/TTitanUA/liveMaker_translate_tools/issues)
Библиотека открыта для доработки и ваших [pull запросов](https://github.com/TTitanUA/liveMaker_translate_tools/pulls)!
